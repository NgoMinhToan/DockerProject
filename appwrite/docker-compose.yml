name: appwrite
services:
    appwrite:
        cpu_shares: 90
        command: []
        container_name: appwrite
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        environment:
            _APP_ASSISTANT_OPENAI_API_KEY: ""
            _APP_CONSOLE_HOSTNAMES: ""
            _APP_CONSOLE_SESSION_ALERTS: disabled
            _APP_CONSOLE_WHITELIST_EMAILS: ""
            _APP_CONSOLE_WHITELIST_IPS: ""
            _APP_CONSOLE_WHITELIST_ROOT: enabled
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_DOMAIN: appwrite.toandev.click
            _APP_DOMAIN_FUNCTIONS: functions.appwrite.toandev.click
            _APP_DOMAIN_TARGET: appwrite.toandev.click
            _APP_EMAIL_SECURITY: ""
            _APP_ENV: production
            _APP_EXECUTOR_HOST: http://exc1/v1
            _APP_EXECUTOR_SECRET: your-secret-key
            _APP_FUNCTIONS_BUILD_TIMEOUT: "900"
            _APP_FUNCTIONS_CPUS: "0"
            _APP_FUNCTIONS_MEMORY: "0"
            _APP_FUNCTIONS_RUNTIMES: node-16.0,php-8.0,python-3.9,ruby-3.0
            _APP_FUNCTIONS_SIZE_LIMIT: "30000000"
            _APP_FUNCTIONS_TIMEOUT: "900"
            _APP_GRAPHQL_MAX_BATCH_SIZE: "10"
            _APP_GRAPHQL_MAX_COMPLEXITY: "250"
            _APP_GRAPHQL_MAX_DEPTH: "3"
            _APP_LOCALE: en
            _APP_LOGGING_CONFIG: ""
            _APP_MAINTENANCE_DELAY: "0"
            _APP_MAINTENANCE_INTERVAL: "86400"
            _APP_MAINTENANCE_RETENTION_ABUSE: "86400"
            _APP_MAINTENANCE_RETENTION_AUDIT: "1209600"
            _APP_MAINTENANCE_RETENTION_CACHE: "2592000"
            _APP_MAINTENANCE_RETENTION_EXECUTION: "1209600"
            _APP_MAINTENANCE_RETENTION_SCHEDULES: "86400"
            _APP_MAINTENANCE_RETENTION_USAGE_HOURLY: "8640000"
            _APP_MIGRATIONS_FIREBASE_CLIENT_ID: ""
            _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_OPTIONS_ABUSE: enabled
            _APP_OPTIONS_FORCE_HTTPS: disabled
            _APP_OPTIONS_FUNCTIONS_FORCE_HTTPS: disabled
            _APP_OPTIONS_ROUTER_PROTECTION: disabled
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_SMS_FROM: ""
            _APP_SMS_PROVIDER: ""
            _APP_SMTP_HOST: ""
            _APP_SMTP_PASSWORD: ""
            _APP_SMTP_PORT: ""
            _APP_SMTP_SECURE: ""
            _APP_SMTP_USERNAME: ""
            _APP_STORAGE_ANTIVIRUS: disabled
            _APP_STORAGE_ANTIVIRUS_HOST: clamav
            _APP_STORAGE_ANTIVIRUS_PORT: "3310"
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: ""
            _APP_STORAGE_BACKBLAZE_BUCKET: ""
            _APP_STORAGE_BACKBLAZE_REGION: us-west-004
            _APP_STORAGE_BACKBLAZE_SECRET: ""
            _APP_STORAGE_DEVICE: local
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: ""
            _APP_STORAGE_DO_SPACES_BUCKET: ""
            _APP_STORAGE_DO_SPACES_REGION: us-east-1
            _APP_STORAGE_DO_SPACES_SECRET: ""
            _APP_STORAGE_LIMIT: "30000000"
            _APP_STORAGE_LINODE_ACCESS_KEY: ""
            _APP_STORAGE_LINODE_BUCKET: ""
            _APP_STORAGE_LINODE_REGION: eu-central-1
            _APP_STORAGE_LINODE_SECRET: ""
            _APP_STORAGE_PREVIEW_LIMIT: "20000000"
            _APP_STORAGE_S3_ACCESS_KEY: ""
            _APP_STORAGE_S3_BUCKET: ""
            _APP_STORAGE_S3_REGION: us-east-1
            _APP_STORAGE_S3_SECRET: ""
            _APP_STORAGE_WASABI_ACCESS_KEY: ""
            _APP_STORAGE_WASABI_BUCKET: ""
            _APP_STORAGE_WASABI_REGION: eu-central-1
            _APP_STORAGE_WASABI_SECRET: ""
            _APP_SYSTEM_EMAIL_ADDRESS: noreply@appwrite.io
            _APP_SYSTEM_EMAIL_NAME: Appwrite
            _APP_SYSTEM_RESPONSE_FORMAT: ""
            _APP_USAGE_STATS: enabled
            _APP_VCS_GITHUB_APP_ID: ""
            _APP_VCS_GITHUB_APP_NAME: ""
            _APP_VCS_GITHUB_CLIENT_ID: ""
            _APP_VCS_GITHUB_CLIENT_SECRET: ""
            _APP_VCS_GITHUB_PRIVATE_KEY: ""
            _APP_VCS_GITHUB_WEBHOOK_SECRET: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
            traefik.constraint-label-stack: appwrite
            traefik.docker.network: appwrite
            traefik.enable: "true"
            traefik.http.routers.appwrite_api_http.entrypoints: appwrite_web
            traefik.http.routers.appwrite_api_http.rule: PathPrefix(`/`)
            traefik.http.routers.appwrite_api_http.service: appwrite_api
            traefik.http.routers.appwrite_api_https.entrypoints: appwrite_websecure
            traefik.http.routers.appwrite_api_https.rule: PathPrefix(`/`)
            traefik.http.routers.appwrite_api_https.service: appwrite_api
            traefik.http.routers.appwrite_api_https.tls: "true"
            traefik.http.services.appwrite_api.loadbalancer.server.port: "80"
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-uploads
              target: /storage/uploads
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-cache
              target: /storage/cache
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-config
              target: /storage/config
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-certificates
              target: /storage/certificates
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-functions
              target: /storage/functions
              bind:
                create_host_path: true
    appwrite-assistant:
        cpu_shares: 90
        command: []
        container_name: appwrite-assistant
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        environment:
            _APP_ASSISTANT_OPENAI_API_KEY: ""
        hostname: appwrite-assistant
        image: appwrite/assistant:0.4.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-console:
        cpu_shares: 90
        command: []
        container_name: appwrite-console
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        hostname: appwrite-console
        image: appwrite/console:5.0.12
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
            traefik.constraint-label-stack: appwrite
            traefik.docker.network: appwrite
            traefik.enable: "true"
            traefik.http.routers.appwrite_console_http.entrypoints: appwrite_web
            traefik.http.routers.appwrite_console_http.rule: PathPrefix(`/console`)
            traefik.http.routers.appwrite_console_http.service: appwrite_console
            traefik.http.routers.appwrite_console_https.entrypoints: appwrite_websecure
            traefik.http.routers.appwrite_console_https.rule: PathPrefix(`/console`)
            traefik.http.routers.appwrite_console_https.service: appwrite_console
            traefik.http.routers.appwrite_console_https.tls: "true"
            traefik.http.services.appwrite_console.loadbalancer.server.port: "80"
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-realtime:
        cpu_shares: 90
        command: []
        container_name: appwrite-realtime
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - realtime
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_OPTIONS_ABUSE: enabled
            _APP_OPTIONS_ROUTER_PROTECTION: disabled
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_USAGE_STATS: enabled
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-realtime
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
            traefik.constraint-label-stack: appwrite
            traefik.docker.network: appwrite
            traefik.enable: "true"
            traefik.http.routers.appwrite_realtime_ws.entrypoints: appwrite_web
            traefik.http.routers.appwrite_realtime_ws.rule: PathPrefix(`/v1/realtime`)
            traefik.http.routers.appwrite_realtime_ws.service: appwrite_realtime
            traefik.http.routers.appwrite_realtime_wss.entrypoints: appwrite_websecure
            traefik.http.routers.appwrite_realtime_wss.rule: PathPrefix(`/v1/realtime`)
            traefik.http.routers.appwrite_realtime_wss.service: appwrite_realtime
            traefik.http.routers.appwrite_realtime_wss.tls: "true"
            traefik.http.services.appwrite_realtime.loadbalancer.server.port: "80"
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-task-maintenance:
        cpu_shares: 90
        command: []
        container_name: appwrite-task-maintenance
        depends_on:
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - maintenance
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_DOMAIN: appwrite.toandev.click
            _APP_DOMAIN_FUNCTIONS: functions.appwrite.toandev.click
            _APP_DOMAIN_TARGET: appwrite.toandev.click
            _APP_ENV: production
            _APP_MAINTENANCE_INTERVAL: "86400"
            _APP_MAINTENANCE_RETENTION_ABUSE: "86400"
            _APP_MAINTENANCE_RETENTION_AUDIT: "1209600"
            _APP_MAINTENANCE_RETENTION_CACHE: "2592000"
            _APP_MAINTENANCE_RETENTION_EXECUTION: "1209600"
            _APP_MAINTENANCE_RETENTION_SCHEDULES: "86400"
            _APP_MAINTENANCE_RETENTION_USAGE_HOURLY: "8640000"
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-task-maintenance
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-task-scheduler-executions:
        cpu_shares: 90
        command: []
        container_name: appwritetaskscheduler-executions
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - schedule-executions
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-task-scheduler-executions
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-task-scheduler-functions:
        cpu_shares: 90
        command: []
        container_name: appwritetaskscheduler-functions
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - schedule-functions
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-task-scheduler-functions
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-task-scheduler-messages:
        cpu_shares: 90
        command: []
        container_name: appwrite-task-scheduler-messages
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - schedule-messages
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-task-scheduler-messages
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-audits:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-audits
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-audits
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-audits
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-builds:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-builds
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-builds
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_DOMAIN: appwrite.toandev.click
            _APP_ENV: production
            _APP_EXECUTOR_HOST: http://exc1/v1
            _APP_EXECUTOR_SECRET: your-secret-key
            _APP_FUNCTIONS_BUILD_TIMEOUT: "900"
            _APP_FUNCTIONS_CPUS: "0"
            _APP_FUNCTIONS_MEMORY: "0"
            _APP_FUNCTIONS_SIZE_LIMIT: "30000000"
            _APP_FUNCTIONS_TIMEOUT: "900"
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_OPTIONS_FORCE_HTTPS: disabled
            _APP_OPTIONS_FUNCTIONS_FORCE_HTTPS: disabled
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: ""
            _APP_STORAGE_BACKBLAZE_BUCKET: ""
            _APP_STORAGE_BACKBLAZE_REGION: us-west-004
            _APP_STORAGE_BACKBLAZE_SECRET: ""
            _APP_STORAGE_DEVICE: local
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: ""
            _APP_STORAGE_DO_SPACES_BUCKET: ""
            _APP_STORAGE_DO_SPACES_REGION: us-east-1
            _APP_STORAGE_DO_SPACES_SECRET: ""
            _APP_STORAGE_LINODE_ACCESS_KEY: ""
            _APP_STORAGE_LINODE_BUCKET: ""
            _APP_STORAGE_LINODE_REGION: eu-central-1
            _APP_STORAGE_LINODE_SECRET: ""
            _APP_STORAGE_S3_ACCESS_KEY: ""
            _APP_STORAGE_S3_BUCKET: ""
            _APP_STORAGE_S3_REGION: us-east-1
            _APP_STORAGE_S3_SECRET: ""
            _APP_STORAGE_WASABI_ACCESS_KEY: ""
            _APP_STORAGE_WASABI_BUCKET: ""
            _APP_STORAGE_WASABI_REGION: eu-central-1
            _APP_STORAGE_WASABI_SECRET: ""
            _APP_VCS_GITHUB_APP_ID: ""
            _APP_VCS_GITHUB_APP_NAME: ""
            _APP_VCS_GITHUB_PRIVATE_KEY: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-builds
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-functions
              target: /storage/functions
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-builds
              target: /storage/builds
              bind:
                create_host_path: true
    appwrite-worker-certificates:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-certificates
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-certificates
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_DOMAIN: appwrite.toandev.click
            _APP_DOMAIN_FUNCTIONS: functions.appwrite.toandev.click
            _APP_DOMAIN_TARGET: appwrite.toandev.click
            _APP_EMAIL_CERTIFICATES: mtoan2610@gmail.com
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-certificates
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-config
              target: /storage/config
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-certificates
              target: /storage/certificates
              bind:
                create_host_path: true
    appwrite-worker-databases:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-databases
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-databases
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-databases
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-deletes:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-deletes
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-deletes
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_EXECUTOR_HOST: http://exc1/v1
            _APP_EXECUTOR_SECRET: your-secret-key
            _APP_LOGGING_CONFIG: ""
            _APP_MAINTENANCE_RETENTION_ABUSE: "86400"
            _APP_MAINTENANCE_RETENTION_AUDIT: "1209600"
            _APP_MAINTENANCE_RETENTION_EXECUTION: "1209600"
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: ""
            _APP_STORAGE_BACKBLAZE_BUCKET: ""
            _APP_STORAGE_BACKBLAZE_REGION: us-west-004
            _APP_STORAGE_BACKBLAZE_SECRET: ""
            _APP_STORAGE_DEVICE: local
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: ""
            _APP_STORAGE_DO_SPACES_BUCKET: ""
            _APP_STORAGE_DO_SPACES_REGION: us-east-1
            _APP_STORAGE_DO_SPACES_SECRET: ""
            _APP_STORAGE_LINODE_ACCESS_KEY: ""
            _APP_STORAGE_LINODE_BUCKET: ""
            _APP_STORAGE_LINODE_REGION: eu-central-1
            _APP_STORAGE_LINODE_SECRET: ""
            _APP_STORAGE_S3_ACCESS_KEY: ""
            _APP_STORAGE_S3_BUCKET: ""
            _APP_STORAGE_S3_REGION: us-east-1
            _APP_STORAGE_S3_SECRET: ""
            _APP_STORAGE_WASABI_ACCESS_KEY: ""
            _APP_STORAGE_WASABI_BUCKET: ""
            _APP_STORAGE_WASABI_REGION: eu-central-1
            _APP_STORAGE_WASABI_SECRET: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-deletes
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-uploads
              target: /storage/uploads
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-cache
              target: /storage/cache
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-functions
              target: /storage/functions
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-builds
              target: /storage/builds
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-certificates
              target: /storage/certificates
              bind:
                create_host_path: true
    appwrite-worker-functions:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-functions
        depends_on:
            mariadb:
                condition: service_started
                required: true
            openruntimes-executor:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-functions
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_DOCKER_HUB_PASSWORD: ""
            _APP_DOCKER_HUB_USERNAME: ""
            _APP_DOMAIN: appwrite.toandev.click
            _APP_ENV: production
            _APP_EXECUTOR_HOST: http://exc1/v1
            _APP_EXECUTOR_SECRET: your-secret-key
            _APP_FUNCTIONS_BUILD_TIMEOUT: "900"
            _APP_FUNCTIONS_CPUS: "0"
            _APP_FUNCTIONS_MEMORY: "0"
            _APP_FUNCTIONS_TIMEOUT: "900"
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_OPTIONS_FORCE_HTTPS: disabled
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_USAGE_STATS: enabled
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-functions
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-mails:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-mails
        depends_on:
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-mails
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_SMTP_HOST: ""
            _APP_SMTP_PASSWORD: ""
            _APP_SMTP_PORT: ""
            _APP_SMTP_SECURE: ""
            _APP_SMTP_USERNAME: ""
            _APP_SYSTEM_EMAIL_ADDRESS: noreply@appwrite.io
            _APP_SYSTEM_EMAIL_NAME: Appwrite
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-mails
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-messaging:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-messaging
        depends_on:
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-messaging
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_SMS_FROM: ""
            _APP_SMS_PROVIDER: ""
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: ""
            _APP_STORAGE_BACKBLAZE_BUCKET: ""
            _APP_STORAGE_BACKBLAZE_REGION: us-west-004
            _APP_STORAGE_BACKBLAZE_SECRET: ""
            _APP_STORAGE_DEVICE: local
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: ""
            _APP_STORAGE_DO_SPACES_BUCKET: ""
            _APP_STORAGE_DO_SPACES_REGION: us-east-1
            _APP_STORAGE_DO_SPACES_SECRET: ""
            _APP_STORAGE_LINODE_ACCESS_KEY: ""
            _APP_STORAGE_LINODE_BUCKET: ""
            _APP_STORAGE_LINODE_REGION: eu-central-1
            _APP_STORAGE_LINODE_SECRET: ""
            _APP_STORAGE_S3_ACCESS_KEY: ""
            _APP_STORAGE_S3_BUCKET: ""
            _APP_STORAGE_S3_REGION: us-east-1
            _APP_STORAGE_S3_SECRET: ""
            _APP_STORAGE_WASABI_ACCESS_KEY: ""
            _APP_STORAGE_WASABI_BUCKET: ""
            _APP_STORAGE_WASABI_REGION: eu-central-1
            _APP_STORAGE_WASABI_SECRET: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-messaging
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-uploads
              target: /storage/uploads
              bind:
                create_host_path: true
    appwrite-worker-migrations:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-migrations
        depends_on:
            mariadb:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-migrations
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_DOMAIN: appwrite.toandev.click
            _APP_DOMAIN_TARGET: appwrite.toandev.click
            _APP_EMAIL_SECURITY: ""
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_MIGRATIONS_FIREBASE_CLIENT_ID: ""
            _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-migrations
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-usage:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-usage
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-usage
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_USAGE_AGGREGATION_INTERVAL: "30"
            _APP_USAGE_STATS: enabled
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-usage
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-usage-dump:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-usage-dump
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-usage-dump
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_USAGE_AGGREGATION_INTERVAL: "30"
            _APP_USAGE_STATS: enabled
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-usage-dump
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    appwrite-worker-webhooks:
        cpu_shares: 90
        command: []
        container_name: appwrite-worker-webhooks
        depends_on:
            mariadb:
                condition: service_started
                required: true
            redis:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        entrypoint:
            - worker-webhooks
        environment:
            _APP_DB_HOST: mariadb
            _APP_DB_PASS: password
            _APP_DB_PORT: "3306"
            _APP_DB_SCHEMA: appwrite
            _APP_DB_USER: user
            _APP_EMAIL_SECURITY: ""
            _APP_ENV: production
            _APP_LOGGING_CONFIG: ""
            _APP_OPENSSL_KEY_V1: my-secret
            _APP_REDIS_HOST: redis
            _APP_REDIS_PASS: ""
            _APP_REDIS_PORT: "6379"
            _APP_REDIS_USER: ""
            _APP_SYSTEM_SECURITY_EMAIL_ADDRESS: certs@appwrite.io
            _APP_WORKER_PER_CORE: "6"
        hostname: appwrite-worker-webhooks
        image: appwrite/appwrite:1.6.0
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
    mariadb:
        cpu_shares: 90
        command:
            - mysqld
            - --innodb-flush-method=fsync
        container_name: appwrite-mariadb
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        environment:
            MARIADB_AUTO_UPGRADE: "1"
            MYSQL_DATABASE: appwrite
            MYSQL_PASSWORD: password
            MYSQL_ROOT_PASSWORD: rootsecretpassword
            MYSQL_USER: user
        hostname: appwrite-mariadb
        image: mariadb:10.11
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-mariadb
              target: /var/lib/mysql
              bind:
                create_host_path: true
    openruntimes-executor:
        cpu_shares: 90
        command: []
        container_name: openruntimes-executor
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        environment:
            OPR_EXECUTOR_DOCKER_HUB_PASSWORD: ""
            OPR_EXECUTOR_DOCKER_HUB_USERNAME: ""
            OPR_EXECUTOR_ENV: production
            OPR_EXECUTOR_INACTIVE_TRESHOLD: "60"
            OPR_EXECUTOR_LOGGING_CONFIG: ""
            OPR_EXECUTOR_MAINTENANCE_INTERVAL: "3600"
            OPR_EXECUTOR_NETWORK: runtimes
            OPR_EXECUTOR_RUNTIMES: node-16.0,php-8.0,python-3.9,ruby-3.0
            OPR_EXECUTOR_SECRET: your-secret-key
            OPR_EXECUTOR_STORAGE_BACKBLAZE_ACCESS_KEY: ""
            OPR_EXECUTOR_STORAGE_BACKBLAZE_BUCKET: ""
            OPR_EXECUTOR_STORAGE_BACKBLAZE_REGION: us-west-004
            OPR_EXECUTOR_STORAGE_BACKBLAZE_SECRET: ""
            OPR_EXECUTOR_STORAGE_DEVICE: local
            OPR_EXECUTOR_STORAGE_DO_SPACES_ACCESS_KEY: ""
            OPR_EXECUTOR_STORAGE_DO_SPACES_BUCKET: ""
            OPR_EXECUTOR_STORAGE_DO_SPACES_REGION: us-east-1
            OPR_EXECUTOR_STORAGE_DO_SPACES_SECRET: ""
            OPR_EXECUTOR_STORAGE_LINODE_ACCESS_KEY: ""
            OPR_EXECUTOR_STORAGE_LINODE_BUCKET: ""
            OPR_EXECUTOR_STORAGE_LINODE_REGION: eu-central-1
            OPR_EXECUTOR_STORAGE_LINODE_SECRET: ""
            OPR_EXECUTOR_STORAGE_S3_ACCESS_KEY: ""
            OPR_EXECUTOR_STORAGE_S3_BUCKET: ""
            OPR_EXECUTOR_STORAGE_S3_REGION: us-east-1
            OPR_EXECUTOR_STORAGE_S3_SECRET: ""
            OPR_EXECUTOR_STORAGE_WASABI_ACCESS_KEY: ""
            OPR_EXECUTOR_STORAGE_WASABI_BUCKET: ""
            OPR_EXECUTOR_STORAGE_WASABI_REGION: eu-central-1
            OPR_EXECUTOR_STORAGE_WASABI_SECRET: ""
        hostname: openruntimes-executor
        image: openruntimes/executor:0.6.11
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
            runtimes: null
        restart: unless-stopped
        stop_signal: SIGINT
        volumes:
            - type: bind
              source: /var/run/docker.sock
              target: /var/run/docker.sock
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-builds
              target: /storage/builds
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-functions
              target: /storage/functions
              bind:
                create_host_path: true
            - type: bind
              source: /tmp
              target: /tmp
              bind:
                create_host_path: true
    redis:
        cpu_shares: 90
        command:
            - redis-server
            - --maxmemory
            - 512mb
            - --maxmemory-policy
            - allkeys-lru
            - --maxmemory-samples
            - "5"
        container_name: appwrite-redis
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        hostname: appwrite-redis
        image: redis:7.2.4-alpine
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
        restart: unless-stopped
        volumes:
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-redis
              target: /data
              bind:
                create_host_path: true
    traefik:
        cpu_shares: 90
        command:
            - --providers.file.directory=/storage/config
            - --providers.file.watch=true
            - --providers.docker=true
            - --providers.docker.exposedByDefault=false
            - --providers.docker.constraints=Label(`traefik.constraint-label-stack`,`appwrite`)
            - --entrypoints.appwrite_web.address=:80
            - --entrypoints.appwrite_websecure.address=:443
        container_name: appwrite-traefik
        depends_on:
            appwrite:
                condition: service_started
                required: true
        deploy:
            resources:
                limits:
                    memory: "9844031488"
        hostname: appwrite-traefik
        image: traefik:2.11
        labels:
            icon: https://appwrite.io/assets/logomark/logo.png
        logging:
            driver: json-file
            options:
                max-file: "5"
                max-size: 10m
        networks:
            appwrite: null
            gateway: null
        ports:
            - mode: ingress
              target: 80
              published: "8180"
              protocol: tcp
            - mode: ingress
              target: 443
              published: "8143"
              protocol: tcp
        restart: unless-stopped
        volumes:
            - type: bind
              source: /var/run/docker.sock
              target: /var/run/docker.sock
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-config
              target: /storage/config
              read_only: true
              bind:
                create_host_path: true
            - type: bind
              source: /DATA/AppData/appwrite/appwrite_appwrite-certificates
              target: /storage/certificates
              read_only: true
              bind:
                create_host_path: true
networks:
    appwrite:
        name: appwrite
    default:
        name: appwrite_default
    gateway:
        name: gateway
    runtimes:
        name: runtimes
x-casaos:
    author: self
    category: self
    hostname: appwrite.toandev.click
    icon: https://appwrite.io/assets/logomark/logo.png
    index: /
    is_uncontrolled: false
    port_map: ""
    scheme: https
    title:
        custom: appwrite
x-logging:
    logging:
        driver: json-file
        options:
            max-file: "5"
            max-size: 10m
